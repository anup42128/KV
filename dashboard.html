<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - PM SHRI Kendriya Vidyalaya Barrackpore (AFS) Feedback Portal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    
    <style>
        /* Dashboard Specific Styles */
        .dashboard-container {
            min-height: 100vh;
            padding-top: 100px;
            padding-bottom: 50px;
        }
        
        .dashboard-header {
            text-align: center;
            margin-bottom: 3rem;
        }
        
        .dashboard-title {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #FFD700, #FFA500);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }
        
        .dashboard-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            font-weight: 400;
        }
        
        /* Student Interface Styles */
        .student-interface {
            margin-bottom: 2rem;
        }
        
        .student-icon-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            box-shadow: var(--shadow-medium);
            max-width: 600px;
            margin: 0 auto;
            border: 3px solid var(--secondary-blue);
            position: relative;
            overflow: hidden;
        }
        
        .student-icon-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(59, 130, 246, 0.1), transparent);
            transform: rotate(-45deg);
            animation: shine 2s ease-in-out infinite;
        }
        
        @keyframes shine {
            0% {
                transform: translateX(-100%) translateY(-100%) rotate(-45deg);
                opacity: 0;
            }
            50% {
                opacity: 1;
            }
            100% {
                transform: translateX(100%) translateY(100%) rotate(-45deg);
                opacity: 0;
            }
        }
        
        .student-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            display: block;
            background: linear-gradient(135deg, #3b82f6, #f97316);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .student-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--secondary-blue), var(--accent-orange));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .student-description {
            color: var(--text-secondary);
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 0;
        }
        
        /* Instructions Section */
        .instructions-section {
            background: var(--card-bg);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-medium);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }
        
        .instructions-section.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .instructions-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .instructions-content {
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }
        
        .feature-list {
            list-style: none;
            margin: 1rem 0;
        }
        
        .feature-list li {
            display: flex;
            align-items: center;
            margin-bottom: 0.8rem;
            padding: 0.5rem;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 10px;
            border-left: 4px solid var(--secondary-blue);
        }
        
        .feature-list li::before {
            content: '‚úì';
            color: var(--secondary-blue);
            font-weight: bold;
            margin-right: 0.5rem;
        }
        
        /* Continue Button */
        .continue-section {
            text-align: center;
        }
        
        .continue-btn {
            background: linear-gradient(135deg, var(--secondary-blue), var(--accent-orange));
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-medium);
            opacity: 0.5;
            pointer-events: none;
        }
        
        .continue-btn.enabled {
            opacity: 1;
            pointer-events: auto;
        }
        
        .continue-btn.enabled:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-heavy);
        }
        
        .continue-btn:disabled {
            background: var(--gray-medium);
            cursor: not-allowed;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .dashboard-title {
                font-size: 2rem;
            }
            
            .dashboard-subtitle {
                font-size: 1rem;
            }
            
            .student-interface {
                padding: 0 1rem;
            }
            
            .student-icon-section {
                padding: 1.5rem;
            }
            
            .student-icon {
                font-size: 3rem;
            }
            
            .student-title {
                font-size: 1.5rem;
            }
            
            .instructions-section {
                margin: 0 1rem 2rem 1rem;
                padding: 1.5rem;
            }
        }
        
        /* Dark Mode Adjustments */
        [data-theme="dark"] .student-icon-section {
            background: var(--card-bg);
            border-color: var(--secondary-blue);
            box-shadow: 0 20px 40px rgba(96, 165, 250, 0.2);
        }
        
        [data-theme="dark"] .feature-list li {
            background: rgba(96, 165, 250, 0.1);
        }
        
        /* Animation Classes */
        .fade-in {
            animation: fadeInUp 0.8s ease forwards;
        }
        
        .fade-in.delay-1 {
            animation-delay: 0.2s;
            opacity: 0;
        }
        
        .fade-in.delay-2 {
            animation-delay: 0.4s;
            opacity: 0;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background Elements -->
    <div class="bg-animation">
        <div class="floating-shape shape1"></div>
        <div class="floating-shape shape2"></div>
        <div class="floating-shape shape3"></div>
        <div class="floating-shape shape4"></div>
        <div class="floating-shape shape5"></div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <span class="nav-title">PM SHRI KV BARRACKPORE (AFS) - Student Portal</span>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">Home</a>
                <a href="about.html" class="nav-link">About</a>
            </div>
        </div>
    </nav>

    <!-- Main Dashboard Content -->
    <div class="dashboard-container">
        <div class="container">
            <!-- Dashboard Header -->
            <div class="dashboard-header fade-in">
                <h1 class="dashboard-title" id="welcomeTitle">Welcome to Dashboard</h1>
                <p class="dashboard-subtitle">Student Feedback Portal</p>
            </div>

            <!-- Student Interface -->
            <div class="student-interface fade-in delay-1">
                <div class="student-icon-section">
                    <span class="student-icon">üë®‚Äçüéì</span>
                    <h2 class="student-title">Student Corner</h2>
                    <p class="student-description">
                        Submit daily feedback, participate in discussions, and engage with the learning community.
                    </p>
                </div>
            </div>

            <!-- Dynamic Instructions Section -->
            <div id="instructions" class="instructions-section">
                <!-- Instructions will be dynamically inserted here -->
            </div>

            <!-- Continue Button -->
            <div class="continue-section fade-in delay-2">
                <button id="continueBtn" class="continue-btn" disabled>
                    <span class="btn-icon">üöÄ</span>
                    Continue to Portal
                </button>
            </div>
        </div>
    </div>

    <!-- Session Management -->
    <script src="session-manager.js"></script>
    
    <script>
        class DashboardManager {
            constructor() {
                this.selectedRole = 'student'; // Auto-select student role
                this.instructionsSection = document.getElementById('instructions');
                this.continueBtn = document.getElementById('continueBtn');
                this.welcomeTitle = document.getElementById('welcomeTitle');
                
                this.init();
            }

            init() {
                this.setupUserWelcome();
                this.setupStudentInterface();
                this.setupEventListeners();
                this.setupAnimations();
            }

            setupUserWelcome() {
                // Get username from URL parameters
                const urlParams = new URLSearchParams(window.location.search);
                const username = urlParams.get('username');
                
                if (username) {
                    // Capitalize first letter of username
                    const formattedUsername = username.charAt(0).toUpperCase() + username.slice(1);
                    this.welcomeTitle.textContent = `Welcome to Dashboard, ${formattedUsername}`;
                    console.log('‚úÖ Username loaded:', formattedUsername);
                } else {
                    // Keep default welcome message if no username
                    console.log('‚ö†Ô∏è No username parameter found');
                }
            }

            setupStudentInterface() {
                // Automatically show student instructions
                this.showInstructions('student');
                this.enableContinueButton();
            }

            setupEventListeners() {
                // Continue button - redirects to feedbacks page
                this.continueBtn.addEventListener('click', () => {
                    console.log('Continue button clicked - redirecting to feedbacks page');
                    // Get username from URL parameters to pass it to the feedbacks page
                    const urlParams = new URLSearchParams(window.location.search);
                    const username = urlParams.get('username');
                    
                    // Redirect to feedbacks page with username parameter
                    if (username) {
                        window.location.href = `feedbacks.html?username=${encodeURIComponent(username)}`;
                    } else {
                        window.location.href = 'feedbacks.html';
                    }
                });
            }

            // Role selection method no longer needed for student-only interface

            showInstructions(role) {
                const instructions = this.getInstructionsForRole(role);
                this.instructionsSection.innerHTML = instructions;
                this.instructionsSection.classList.add('show');
            }

            getInstructionsForRole(role) {
                // Only student instructions needed now
                const studentInstructions = {
                    title: 'üë®‚Äçüéì Student Instructions',
                    content: `
                        <p>Welcome, Student! You now have access to the <strong>Students Corner</strong> - a safe space designed exclusively for students.</p>
                        <h4 style="margin: 1rem 0 0.5rem 0; color: var(--text-primary);">Students Corner Features:</h4>
                        <ul class="feature-list">
                            <li>Submit daily feedback about classes, facilities, and school life</li>
                            <li>View and interact with feedback from fellow students only</li>
                            <li>Participate in student polls and surveys</li>
                            <li>Share your school experiences safely and anonymously</li>
                            <li>Access your personal feedback history and submissions</li>
                            <li>Receive student-specific announcements and updates</li>
                        </ul>
                        <div style="background: rgba(59, 130, 246, 0.1); padding: 1rem; border-radius: 10px; margin-top: 1rem; border-left: 4px solid var(--secondary-blue);">
                            <strong>üîí Privacy Protection:</strong> The Students Corner is completely private and separate from teachers. Your feedback and discussions are only visible to other students. Teachers cannot access student submissions to maintain your privacy.
                        </div>
                        <div style="background: rgba(220, 53, 69, 0.1); padding: 1rem; border-radius: 10px; margin-top: 1rem; border-left: 4px solid #dc3545;">
                            <strong>‚ö†Ô∏è ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡•Ç‡§ö‡§®‡§æ / Important Guidelines:</strong><br><br>
                            <strong>‡§π‡§ø‡§Ç‡§¶‡•Ä:</strong> "‡§Ü‡§™ ‡§Ö‡§™‡§®‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§Æ‡•á‡§Ç ‡§Ö‡§™‡§®‡•Ä ‡§Æ‡§æ‡§§‡•É‡§≠‡§æ‡§∑‡§æ ‡§Ø‡§æ ‡§∏‡§π‡§ú ‡§≠‡§æ‡§∑‡§æ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç, ‡§≤‡•á‡§ï‡§ø‡§® ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§∂‡§¨‡•ç‡§¶‡•ã‡§Ç ‡§Ø‡§æ ‡§ó‡§æ‡§≤‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§ ‡§∏‡§Æ‡•ç‡§Æ‡§æ‡§®‡§ú‡§®‡§ï ‡§î‡§∞ ‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§π‡•Ä ‡§π‡§Æ‡§æ‡§∞‡§æ ‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø ‡§π‡•à‡•§"<br><br>
                            <strong>English:</strong> "You are free to express yourself in your natural or native language, but please avoid using abusive words or offensive language. Our aim is to encourage respectful and positive communication."
                        </div>
                    `
                };

                return `
                    <div class="instructions-title">
                        ${studentInstructions.title}
                    </div>
                    <div class="instructions-content">
                        ${studentInstructions.content}
                    </div>
                `;
            }

            enableContinueButton() {
                this.continueBtn.classList.add('enabled');
                this.continueBtn.disabled = false;
            }

            setupAnimations() {
                // Add staggered animations
                const animatedElements = document.querySelectorAll('.fade-in');
                animatedElements.forEach((element, index) => {
                    element.style.opacity = '0';
                    element.style.transform = 'translateY(30px)';
                    
                    setTimeout(() => {
                        element.style.transition = 'all 0.8s ease';
                        element.style.opacity = '1';
                        element.style.transform = 'translateY(0)';
                    }, index * 200);
                });
            }
        }

        // Initialize Dashboard when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new DashboardManager();
        });
        
        // Theme detection and application (if user has theme preference)
        if (localStorage.getItem('theme') === 'dark' || 
            (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.setAttribute('data-theme', 'dark');
        }

        // Theme detection and application (if user has theme preference)
        if (localStorage.getItem('theme') === 'dark' || 
            (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.setAttribute('data-theme', 'dark');
        }
    </script>
</body>
</html>